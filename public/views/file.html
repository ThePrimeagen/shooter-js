{{ block "file-select" . }}
<form action="/" method="get">
    <input text="text" name="file" value="{{ if . }}{{ .File }}{{end}}" />
    <button type="submit">Display</button>
</form>
{{ end }}

{{ block "file-display" . }}
    {{ if . }}
        <p> TOTAL TICKS: {{ .TotalTicks }} </p>
        {{ if .Charts }}
            {{ range .Charts }}
                {{ template "chart" . }}
            {{ end }}
        {{ end }}

        {{ if .ErrorMsg }}
            <div class="error">{{ .ErrorMsg }}</div>
        {{ end }}
    {{ else }}
        <p>Select a file to start</p>
    {{ end }}
{{ end }}

{{ block "chart" . }}
<div>
    <canvas id="chart-{{ .Id }}"></canvas>
</div>
<script>
{
const ctx = document.getElementById('chart-{{ .Id }}');
new Chart(ctx, {
    type: 'bar',
    data: {
        labels: {{ .Labels }},
        datasets: [{
            label: {{ .Title }},
            data: {{ .Data }},
            borderWidth: 1
        }]
    },
    options: {
        scales: {
            y: {
                beginAtZero: true
            }
        }
    }
});
}
</script>
{{ end }}
